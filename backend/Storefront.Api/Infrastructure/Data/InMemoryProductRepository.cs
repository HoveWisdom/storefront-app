using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
using Storefront.Api.Domain.Entities;
using Storefront.Api.Domain.Interfaces;

namespace Storefront.Api.Infrastructure.Data
{
    /// <summary>
    /// Development-time, in-memory product repository.
    /// Implements IProductRepository and seeds a small dataset.
    /// Swap out for EF Core or another provider when needed.
    /// </summary>
    public sealed class InMemoryProductRepository : IProductRepository
    {
        private readonly IReadOnlyList<Product> _products;

        public InMemoryProductRepository()
        {
            // Seed sample data
            _products = new List<Product>
            {
                new Product(Guid.Parse("11111111-1111-1111-1111-111111111111"), "Classic T-Shirt", "Comfortable cotton t-shirt", 19.99m, 120, "https://via.placeholder.com/300x200.png?text=Classic+T-Shirt", "Apparel"),
                new Product(Guid.Parse("22222222-2222-2222-2222-222222222222"), "Ceramic Mug", "12oz ceramic coffee mug", 9.5m, 200, "https://via.placeholder.com/300x200.png?text=Ceramic+Mug", "Home"),
                new Product(Guid.Parse("33333333-3333-3333-3333-333333333333"), "Wireless Headphones", "Over-ear bluetooth headphones", 89.99m, 40, "https://via.placeholder.com/300x200.png?text=Headphones", "Electronics"),
                new Product(Guid.Parse("44444444-4444-4444-4444-444444444444"), "Notebook", "Hardcover ruled notebook", 6.5m, 350, "https://via.placeholder.com/300x200.png?text=Notebook", "Stationery")
            }.AsReadOnly();
        }

        public Task<IReadOnlyList<Product>> GetAllAsync(CancellationToken cancellationToken = default)
        {
            return Task.FromResult(_products);
        }

        public Task<Product?> GetByIdAsync(Guid id, CancellationToken cancellationToken = default)
        {
            var product = _products.FirstOrDefault(p => p.Id == id);
            return Task.FromResult(product);
        }
    }
}




























































































































































































































































































































































































































































































